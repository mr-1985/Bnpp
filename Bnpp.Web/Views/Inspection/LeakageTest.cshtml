@model IEnumerable<Bnpp.DataLayer.Entities.InspectionData.TestResults>
@{
    ViewData["Title"] = "LeakageTest";
    Layout = null;
}

<div>

    <div id="iLoading22" style="display: none;">
        <img src="/images/loading.gif">
    </div>

    <h1>Leakage Test of Weld</h1>

    <a class="btn-new-equip" style="cursor:pointer" onclick="Create()">New</a>
    <input type="button" id="delete" class="btn-delete-equip" value="Delete">
    <br />
    @{
        int rowCount = 1;
    }
    <table id="myTable" cellpadding="3" cellspacing="0" class="show-table">
        <thead>
            <tr role="row">
                <th>
                    <input type="checkbox" id="checkAll" />
                </th>
                <th></th>
                <th style="width: 150px">
                    <b>No</b>
                </th>
                <th style="width: 250px">
                    <b>Date</b>
                </th>
                <th style="width: 250px">
                    <b>Code</b>
                </th>
                <th style="width: 120px">
                    <b>No Weld Joints</b>
                </th>
                <th style="width: 120px">
                    <b>Dimension of Weld</b>
                </th>

                <th style="width: 120px">
                    <b>	Scope of Testing</b>
                </th>
                <th style="width: 120px">
                    <b>	Defect description</b>
                </th>
                <th style="width: 120px">
                    <b>	Quality assessment</b>
                </th>
                <th style="width: 120px">
                    <b>	No. of log book</b>
                </th>
                <th style="width: 120px">
                    <b>	Notes</b>
                </th>

                <th style="width: 120px">
                    <b>Actions</b>
                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr role="row">
                    <td>
                        <input type="checkbox" class="checkBox" value="@item.TestResultsId" />
                    </td>
                    <td>
                        @rowCount
                    </td>
                    <td>
                        @item.NO
                    </td>
                    <td>
                        @item.TestingDate.ToString("yy/MM/dd")
                    </td>
                    <td>
                        @item.Code
                    </td>
                    <td>
                        @item.WeldNo
                    </td>
                    <td>
                        @item.DimensionofWeld
                    </td>
                    <td>
                        @item.TestScope
                    </td>

                    <td> @item.FoundDefectDescription</td>
                    <td> @item.QualityAssessment</td>
                    <td> @item.NooflogBook</td>
                    <td> @item.Notes</td>
                    <td>

                        <a class="btn-edit-equip" onclick="Edit(@item.TestResultsId)">
                            Edit
                        </a>
                    </td>
                </tr>
                rowCount++;
            }
        </tbody>
    </table>


    <br>
    <div style="clear: both;">
    </div>
    <br>
    <br>
    <iframe style="display: none" id="if_-2_119" src=""></iframe>

</div>

<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.unobtrusive-ajax.min.js"></script>


<script src="/js/datatables.min.js"></script>




<script>
    $(document).ready(function () {
        $("#myTable").DataTable();
    });
</script>
<script>

    function Create() {
        $("#newPage").load("/Inspection/CreateLeakageTest/");
    }

    function Edit(id) {
        $("#newPage").load("/Inspection/EditLeakageTest/" + id);
    }



    function showPage1() {
        $("#Tabs").load("/Inspection/InspectionReports/");
    }

    function showPage2() {
        $("#Tabs").load("/Inspection/InspectionInstructions/");
    }

    function showPage3() {
        $("#Tabs").load("/Inspection/InspectionPrograms/");
    }

    function showPage4() {
        $("#Tabs").load("/Inspection/InspectionResults/");
    }

    //SUB MENU

    function showsubPage1() {
        //$("#newPage").load("/Inspection/WorkingPrograms/");
        $("#Tabs").load("/Inspection/InspectionResults/");
    }

    function showsubPage2() {
        $("#newPage").load("/Inspection/LeakageTest/");
    }

    function showsubPage3() {
        $("#newPage").load("/Inspection/LiquidPenetrated/");
    }
    

    $("#checkAll").click(function () {
        $(".checkBox").prop('checked',
            $(this).prop('checked'));
    });

    $("#delete").click(function () {
        var selectedIDs = new Array();

        $('input:checkbox.checkBox').each(function () {
            if ($(this).prop('checked')) {
                selectedIDs.push($(this).val());
            }
        });

        $.ajax({
            type: "POST",
            url: "/Inspection/DeleteLeakageTest",
            data: { "leakageId": selectedIDs },

            success: function (response) {
                $("#newPage").load("/Inspection/LeakageTest/");
            },
            failure: function (response) {
                alert(response.responseText);
            },
            error: function (response) {
                alert(response.responseText);
            }

        });

    });


</script>