@model IEnumerable<Bnpp.DataLayer.Entities.InspectionData.TestResults>
@{
    ViewData["Title"] = "UltrasonicTests";
    Layout = null;
}

<div id="tab1" class="tab-item" style="display: block;">
<h1 id="iH1">Inspection Results</h1>

<div class="tab-buttons">
    <ul>
        <li id="tab-button1" class="tab-buttons-li" @*style="background-color: rgb(240, 240, 240); border-color: rgb(192, 192, 192); font-weight: normal;"*@ @*style="background-color: rgb(208, 208, 208); border-color: rgb(128, 128, 128); font-weight: bold;"*@>
            <a id="tab-button-a1"
               onclick="showsubPage1()" style="cursor:pointer;color: rgb(0, 113, 158);">
                Visual Control
            </a>
        </li>
        <li id="tab-button2" @*class="tab-buttons-li"*@ style="background-color: rgb(240, 240, 240); border-color: rgb(192, 192, 192); font-weight: normal;">
            <a id="tab-buttona2" onclick="showsubPage2()" style="cursor:pointer;color: rgb(110, 110, 255);">
                Leakage Test of Weld
            </a>
        </li>
        <li id="tab-button2" @*class="tab-buttons-li"*@ style="background-color: rgb(240, 240, 240); border-color: rgb(192, 192, 192); font-weight: normal;">
            <a id="tab-buttona2" onclick="showsubPage3()" style="cursor:pointer;color: rgb(110, 110, 255);">
                Liquid Penetrated Test
            </a>
        </li>
        <li id="tab-button2" @*class="tab-buttons-li"*@ style="background-color: rgb(240, 240, 240); border-color: rgb(192, 192, 192); font-weight: normal;">
            <a id="tab-buttona2" onclick="showsubPage4()" style="cursor:pointer;color: rgb(110, 110, 255);">
                Magnetic Powder test
            </a>
        </li>
            <li id="tab-button2" @*class="tab-buttons-li"*@ style="background-color: rgb(240, 240, 240); border-color: rgb(192, 192, 192); font-weight: normal;" >
            <a id="tab-buttona2" onclick="showsubPage5()" style="cursor:pointer;color: rgb(110, 110, 255);">
                Radiographics Test
            </a>
        </li>
            <li id="tab-button2" @*class="tab-buttons-li"*@ style="background-color: rgb(208, 208, 208); border-color: rgb(128, 128, 128); font-weight: bold;">
            <a id="tab-buttona2" onclick="showsubPage6()" style="cursor:pointer;color: rgb(110, 110, 255);">
                Ultrasonic Tests
            </a>
        </li>
        <li id="tab-button2" @*class="tab-buttons-li"*@ style="background-color: rgb(240, 240, 240); border-color: rgb(192, 192, 192); font-weight: normal;">
            <a id="tab-buttona2" onclick="showsubPage7()" style="cursor:pointer;color: rgb(110, 110, 255);">
                Metal thickness ultrasonic measurement
            </a>
        </li>

        <li id="tab-button1" class="tab-buttons-li" @*style="background-color: rgb(240, 240, 240); border-color: rgb(192, 192, 192); font-weight: normal;"*@ @*style="background-color: rgb(208, 208, 208); border-color: rgb(128, 128, 128); font-weight: bold;"*@>
            <a id="tab-button-a1"
               onclick="showsubPage8()" style="cursor:pointer;color: rgb(0, 113, 158);">
                Visual Inspection Form
            </a>
        </li>
        <li id="tab-button2" @*class="tab-buttons-li"*@ style="background-color: rgb(240, 240, 240); border-color: rgb(192, 192, 192); font-weight: normal;">
            <a id="tab-buttona2" onclick="showsubPage9()" style="cursor:pointer;color: rgb(110, 110, 255);">
                Leakage Test Form
            </a>
        </li>
        <li id="tab-button2" @*class="tab-buttons-li"*@ style="background-color: rgb(240, 240, 240); border-color: rgb(192, 192, 192); font-weight: normal;">
            <a id="tab-buttona2" onclick="showsubPage10()" style="cursor:pointer;color: rgb(110, 110, 255);">
                Liquid Penetration Test Form
            </a>
        </li>
        <li id="tab-button2" @*class="tab-buttons-li"*@ style="background-color: rgb(240, 240, 240); border-color: rgb(192, 192, 192); font-weight: normal;">
            <a id="tab-buttona2" onclick="showsubPage11()" style="cursor:pointer;color: rgb(110, 110, 255);">
                Magnetic Powder Test Form
            </a>
        </li>
        <li id="tab-button2" @*class="tab-buttons-li"*@ style="background-color: rgb(240, 240, 240); border-color: rgb(192, 192, 192); font-weight: normal;">
            <a id="tab-buttona2" onclick="showsubPage12()" style="cursor:pointer;color: rgb(110, 110, 255);">
                Radiographics Test Form
            </a>
        </li>
        <li id="tab-button2" @*class="tab-buttons-li"*@ style="background-color: rgb(240, 240, 240); border-color: rgb(192, 192, 192); font-weight: normal;">
            <a id="tab-buttona2" onclick="showsubPage13()" style="cursor:pointer;color: rgb(110, 110, 255);">
                Ultrasonic Test Form
            </a>
        </li>
        <li id="tab-button2" @*class="tab-buttons-li"*@ @*style="background-color: rgb(208, 208, 208); border-color: rgb(128, 128, 128); font-weight: bold;"*@>
            <a id="tab-buttona2" onclick="showsubPage14()" style="cursor:pointer;color: rgb(110, 110, 255);">
                Metal thickness ultrasonic Test Form
            </a>
        </li>
    </ul>

    <div style="clear:both;"></div>
</div>

<div>
    <div id="newPage">
    <div class="bevel-box">
        <table cellpadding="3" cellspacing="0">
            <tbody>
                <tr>

                    @* <td>
                    <input type="file" name="uploadedFile" id="uploadedFile" style="direction: ltr; text-align: left;">
                    <input onclick="__doPostBack('upload','')" name="upload" type="button" id="upload" value="Import Excel" style="direction: ltr; text-align: left;">
                    </td>*@



                    <td>
                        <form method="post" asp-controller="Inspection" asp-action="ExportUltrasonicTests">
                            <input type="submit" value="Export" />
                        </form>
                    </td>

                    <td style="width: 200px;">
                        <span id="message">
                        </span>
                    </td>
                    <td>
                        <a href="#" target="_blank">
                            <img src="/images/print_printer.png" title="Print">
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>

    </div>

    <div id="iLoading22" style="display: none;">
        <img src="/images/loading.gif">
    </div>

    <h1>Ultrasonic Tests</h1>

    <a class="btn-new-equip" style="cursor:pointer" onclick="Create()">New</a>
    <input type="button" id="delete" class="btn-delete-equip" value="Delete">
    <br />
    @{
        int rowCount = 1;
    }
    <table id="myTable" cellpadding="3" cellspacing="0" class="show-table">
        <thead>
            <tr role="row">
                <th>
                    <input type="checkbox" id="checkAll" />
                </th>
                <th></th>
                <th style="width: 150px">
                    <b>No</b>
                </th>
                <th style="width: 250px">
                    <b>Date</b>
                </th>
                <th style="width: 120px">
                    <b>Unit description</b>
                </th>
                <th style="width: 250px">
                    <b>Weld No</b>
                </th>

                <th style="width: 250px">
                    <b>Dimensions of unit</b>
                </th>
                
                <th style="width: 120px">
                    <b>	Test Scope</b>
                </th>
                <th style="width: 120px">
                    <b>Maximum allowed</b>
                </th>
                <th style="width: 120px">
                    <b>Found defect description</b>
                </th>
                
                <th style="width: 120px">
                    <b>	Quality assessment</b>
                </th>
                

                <th style="width: 120px">
                    <b>	No. of log book</b>
                </th>
                <th style="width: 120px">
                    <b>	Notes</b>
                </th>

                <th style="width: 120px">
                    <b>Actions</b>
                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr role="row">
                    <td>
                        <input type="checkbox" class="checkBox" value="@item.TestResultsId" />
                    </td>
                    <td>
                        @rowCount
                    </td>
                    <td>
                        @item.NO
                    </td>
                    <td>
                        @item.TestingDate.ToString("yy/MM/dd")
                    </td>
                    <td>
                        @item.UnitDescription
                    </td>
                    <td>
                        @item.WeldNo
                    </td>
                    <td>
                        @item.DimensionsofUnit
                    </td>

                    <td>
                        @item.TestScope
                    </td>
                    <td> @item.MaximumAllowed</td>
                    <td> @item.FoundDefectDescription</td>

                    <td> @item.QualityAssessment</td>
                    
                    <td> @item.NooflogBook</td>
                    <td> @item.Notes</td>
                    <td>

                        <a class="btn-edit-equip" onclick="Edit(@item.TestResultsId)">
                            Edit
                        </a>
                    </td>
                </tr>
                rowCount++;
            }
        </tbody>
    </table>


    <br>
    <div style="clear: both;">
    </div>
    <br>
    <br>
    <iframe style="display: none" id="if_-2_119" src=""></iframe>

</div>
</div>
</div>

<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.unobtrusive-ajax.min.js"></script>


<script src="/js/datatables.min.js"></script>




<script>
    $(document).ready(function () {
        $("#myTable").DataTable();
    });
</script>
<script>

    function Create() {
        $("#newPage").load("/Inspection/CreateUltrasonicTests/");
    }

    function Edit(id) {
        $("#newPage").load("/Inspection/EditUltrasonicTests/" + id);
    }



    function showPage1() {
        $("#Tabs").load("/Inspection/InspectionReports/");
    }

    function showPage2() {
        $("#Tabs").load("/Inspection/InspectionInstructions/");
    }

    function showPage3() {
        $("#Tabs").load("/Inspection/InspectionPrograms/");
    }

    function showPage4() {
        $("#Tabs").load("/Inspection/InspectionResults/");
    }


    //SUB MENU

    function showsubPage1() {
        //$("#newPage").load("/Inspection/WorkingPrograms/");
        $("#Tabs").load("/Inspection/InspectionResults/");
    }

    function showsubPage2() {
        $("#submenu").load("/Inspection/LeakageTest/");
    }

    function showsubPage3() {
        $("#submenu").load("/Inspection/LiquidPenetrated/");
    }

    function showsubPage4() {
        $("#submenu").load("/Inspection/MagneticPowder/");
    }

    function showsubPage5() {
        $("#submenu").load("/Inspection/RadiographicsTest/");
    }

    function showsubPage6() {
        $("#submenu").load("/Inspection/UltrasonicTests/");
    }

    function showsubPage7() {
        $("#submenu").load("/Inspection/MetalThickness/");
    }

    function showsubPage8() {
        $("#submenu").load("/Inspection/VisualForm/");
    }

    function showsubPage9() {
        $("#submenu").load("/Inspection/LeakageForm/");
    }

    function showsubPage10() {
        $("#submenu").load("/Inspection/PenetrationForm/");
    }

    function showsubPage11() {
        $("#submenu").load("/Inspection/MagneticForm/");
    }

    function showsubPage12() {
        $("#submenu").load("/Inspection/RadiographicsForm/");
    }

    function showsubPage13() {
        $("#submenu").load("/Inspection/UltrasonicForm/");
    }

    function showsubPage14() {
        $("#submenu").load("/Inspection/MetalForm/");
    }



    $("#checkAll").click(function () {
        $(".checkBox").prop('checked',
            $(this).prop('checked'));
    });

    $("#delete").click(function () {
        var selectedIDs = new Array();

        $('input:checkbox.checkBox').each(function () {
            if ($(this).prop('checked')) {
                selectedIDs.push($(this).val());
            }
        });

        var result = confirm("are you sure you want to delete?");
        if (result) {
        $.ajax({
            type: "POST",
            url: "/Inspection/DeleteUltrasonicTests",
            data: { "sonicId": selectedIDs },

            success: function (response) {
                    $("#submenu").load("/Inspection/UltrasonicTests/");
            },
            failure: function (response) {
                alert(response.responseText);
            },
            error: function (response) {
                alert(response.responseText);
            }

        });
        }

    });


</script>