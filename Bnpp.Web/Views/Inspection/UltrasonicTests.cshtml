@model IEnumerable<Bnpp.DataLayer.Entities.InspectionData.TestResults>
@{
    ViewData["Title"] = "UltrasonicTests";
    Layout = null;
}

<div>

    <div id="iLoading22" style="display: none;">
        <img src="/images/loading.gif">
    </div>

    <h1>Ultrasonic Tests</h1>

    <a class="btn-new-equip" style="cursor:pointer" onclick="Create()">New</a>
    <input type="button" id="delete" class="btn-delete-equip" value="Delete">
    <br />
    @{
        int rowCount = 1;
    }
    <table id="myTable" cellpadding="3" cellspacing="0" class="show-table">
        <thead>
            <tr role="row">
                <th>
                    <input type="checkbox" id="checkAll" />
                </th>
                <th></th>
                <th style="width: 150px">
                    <b>No</b>
                </th>
                <th style="width: 250px">
                    <b>Date</b>
                </th>
                <th style="width: 120px">
                    <b>Unit description</b>
                </th>
                <th style="width: 250px">
                    <b>Weld No</b>
                </th>

                <th style="width: 250px">
                    <b>Dimensions of unit</b>
                </th>
                
                <th style="width: 120px">
                    <b>	Test Scope</b>
                </th>
                <th style="width: 120px">
                    <b>Maximum allowed</b>
                </th>
                <th style="width: 120px">
                    <b>Found defect description</b>
                </th>
                
                <th style="width: 120px">
                    <b>	Quality assessment</b>
                </th>
                

                <th style="width: 120px">
                    <b>	No. of log book</b>
                </th>
                <th style="width: 120px">
                    <b>	Notes</b>
                </th>

                <th style="width: 120px">
                    <b>Actions</b>
                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr role="row">
                    <td>
                        <input type="checkbox" class="checkBox" value="@item.TestResultsId" />
                    </td>
                    <td>
                        @rowCount
                    </td>
                    <td>
                        @item.NO
                    </td>
                    <td>
                        @item.TestingDate.ToString("yy/MM/dd")
                    </td>
                    <td>
                        @item.UnitDescription
                    </td>
                    <td>
                        @item.WeldNo
                    </td>
                    <td>
                        @item.DimensionsofUnit
                    </td>

                    <td>
                        @item.TestScope
                    </td>
                    <td> @item.MaximumAllowed</td>
                    <td> @item.FoundDefectDescription</td>

                    <td> @item.QualityAssessment</td>
                    
                    <td> @item.NooflogBook</td>
                    <td> @item.Notes</td>
                    <td>

                        <a class="btn-edit-equip" onclick="Edit(@item.TestResultsId)">
                            Edit
                        </a>
                    </td>
                </tr>
                rowCount++;
            }
        </tbody>
    </table>


    <br>
    <div style="clear: both;">
    </div>
    <br>
    <br>
    <iframe style="display: none" id="if_-2_119" src=""></iframe>

</div>

<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.unobtrusive-ajax.min.js"></script>


<script src="/js/datatables.min.js"></script>




<script>
    $(document).ready(function () {
        $("#myTable").DataTable();
    });
</script>
<script>

    function Create() {
        $("#newPage").load("/Inspection/CreateUltrasonicTests/");
    }

    function Edit(id) {
        $("#newPage").load("/Inspection/EditUltrasonicTests/" + id);
    }



    function showPage1() {
        $("#Tabs").load("/Inspection/InspectionReports/");
    }

    function showPage2() {
        $("#Tabs").load("/Inspection/InspectionInstructions/");
    }

    function showPage3() {
        $("#Tabs").load("/Inspection/InspectionPrograms/");
    }

    function showPage4() {
        $("#Tabs").load("/Inspection/InspectionResults/");
    }

    //SUB MENU

    function showsubPage1() {
        //$("#newPage").load("/Inspection/WorkingPrograms/");
        $("#Tabs").load("/Inspection/InspectionResults/");
    }

    function showsubPage2() {
        $("#newPage").load("/Inspection/LeakageTest/");
    }

    function showsubPage3() {
        $("#newPage").load("/Inspection/LiquidPenetrated/");
    }

    function showsubPage4() {
        $("#newPage").load("/Inspection/MagneticPowder/");
    }

    function showsubPage5() {
        $("#newPage").load("/Inspection/RadiographicsTest/");
    }

    function showsubPage6() {
        $("#newPage").load("/Inspection/UltrasonicTests/");
    }

    function showsubPage7() {
        $("#newPage").load("/Inspection/MetalThickness/");
    }



    $("#checkAll").click(function () {
        $(".checkBox").prop('checked',
            $(this).prop('checked'));
    });

    $("#delete").click(function () {
        var selectedIDs = new Array();

        $('input:checkbox.checkBox').each(function () {
            if ($(this).prop('checked')) {
                selectedIDs.push($(this).val());
            }
        });

        $.ajax({
            type: "POST",
            url: "/Inspection/DeleteUltrasonicTests",
            data: { "sonicId": selectedIDs },

            success: function (response) {
                $("#newPage").load("/Inspection/UltrasonicTests/");
            },
            failure: function (response) {
                alert(response.responseText);
            },
            error: function (response) {
                alert(response.responseText);
            }

        });

    });


</script>