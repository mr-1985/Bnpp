@model Bnpp.DataLayer.Entities.DesignBasis
@{
    ViewData["Title"] = "CreateMethodology";
    Layout = null;
}

<div id="normal">
    <form id="normalForm" asp-action="CreateMethodology" method="post">

        <table cellpadding="3" cellspacing="0">
            <tbody>
            <tr>
                <td>
                    Code:
                </td>
                <td>
                    <input asp-for="NameofConditions" type="text" id="iName" style="direction: ltr; text-align: left;">
                </td>
                <td>
                    <span asp-validation-for="NameofConditions"></span>
                </td>
            </tr>
            <tr>
                <td>
                    File Name:
                </td>
                <div id="thumbs"></div>
                <td>
                    <input asp-for="AllowableNumber" type="text" id="fileName" value="" required="" style="direction: ltr; text-align: left;">
                </td>
                <td>
                    <span asp-validation-for="AllowableNumber"></span>
                </td>
            </tr>
            <tr>
                <td>
                    Select File:
                </td>
                <td>
                    <input type="file" name="imgMetholodyUp" id="imgMetholodyUp" style="direction: ltr; text-align: left;">
                </td>
            </tr>
            <tr>
                <td>
                    Doc. Name:
                </td>
                <td>
                    <input type="text" style="direction: ltr; text-align: left;">
                </td>
            </tr>

            <tr>
                <td>
                    <input type="button" onclick="submitNormal()" value="Save" class="butn-save" style="direction: ltr; text-align: left;">
                    <input type="button" onclick="showPage1()" value="Cancel" id="Button2" class="butn-cancel" style="direction: ltr; text-align: left;">
                </td>
            </tr>
            </tbody>
        </table>
    </form>
</div>



<script src="/js/jquery.min.js"></script>
<script src="~/js/jquery.validate.min.js"></script>
<script src="~/js/jquery.validate.unobtrusive.min.js"></script>

<script type="text/javascript">
        function submitNormal() {
            var data = $("#normalForm").serialize();


            $.ajax({
                type: 'POST',
                url: '/ManagementDocuments/CreateMethodology',
                contentType: 'application/x-www-form-urlencoded; charset=UTF-8', // when we use .serialize() this generates the data in query string format. this needs the default contentType (default content type is: contentType: 'application/x-www-form-urlencoded; charset=UTF-8') so it is optional, you can remove it
                data: data,
                success: function() {
                   $("#Tabs").load("/ManagementDocuments/Methodology/");
                },

                error: function() {
                    //alert('Failed to receive the Data');
                    //console.log('Failed ');
                }
            });

        }



          function readURL(input) {

            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#imgCourse').attr('src', e.target.result);
                }

                reader.readAsDataURL(input.files[0]);
            }
        }

        $("#imgCourseUp").change(function () {
            readURL(this);
        });

            $('input[type=file]').change(function () {

        $('#fileName').attr('value', this.files[0].name);
    });
</script>

